[案例之星级评价](#top)

- [1. 组件定义](#组件)
- [2. 应用](#应用)

<h2 id="组件">1. 组件定义</h2>

```javascript
import { Component, OnInit, OnChanges, Input, Output,EventEmitter } from '@angular/core';
@Component({
  selector: 'app-stars',
  template: `
  <p>
    <span *ngFor="let star of stars; let i=index;" class="glyphicon glyphicon-star" [class.glyphicon-star-empty]="star" (click)="clickStar(i)"></span>
    <span>{{rating | number: "1.0-2"}}星</span>
  </p>
  `,
  styleUrls: ['./stars.component.css']
})
export class StarsComponent implements OnInit, OnChanges {
  @Input()
  private rating: number = 0;
  @Output()
  private ratingChange: EventEmitter<number> = new EventEmitter();
  private stars: boolean[];
  @Input()
  private starReadonly: boolean = true;
  constructor() { }
  ngOnInit() {}
  ngOnChanges(){
    this.stars = [];
    for(let i=1; i<=5; i++){
      this.stars.push(i>this.rating);
    }
  }
  
  clickStar(index:number){
    if(!this.starReadonly){
      this.rating = index+1;
      //this.ngOnInit();
      this.ratingChange.emit(this.rating);
    }
  }
}
```

[back to top](#top)

<h2 id="应用">2. 应用</h2>

[back to top](#top)
